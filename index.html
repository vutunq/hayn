<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Shop Quần Áo</title>
    <script src="https://unpkg.com/@supabase/supabase-js"></script>
</head>
<body>
    <h1>Quản lý Shop Quần Áo</h1>
    
    <h2>Thêm Đơn Hàng</h2>
    <input type="text" id="tenKhach" placeholder="Tên khách hàng">
    <input type="text" id="sanPham" placeholder="Sản phẩm">
    <input type="number" id="soLuong" placeholder="Số lượng">
    <button onclick="themDonHang()">Thêm Đơn Hàng</button>
    
    <h2>Danh Sách Nhân Viên</h2>
    <button onclick="layDanhSachNhanVien()">Tải danh sách</button>
    <ul id="danhSachNhanVien"></ul>
    
    <h2>Cập Nhật Kho</h2>
    <input type="number" id="productId" placeholder="ID sản phẩm">
    <input type="number" id="newQuantity" placeholder="Số lượng mới">
    <button onclick="capNhatKho()">Cập Nhật Kho</button>
    
    <script>
        const SUPABASE_URL = 'https://your-supabase-url.supabase.co';
        const SUPABASE_ANON_KEY = 'your-anon-key';
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        async function themDonHang() {
            const tenKhach = document.getElementById('tenKhach').value;
            const sanPham = document.getElementById('sanPham').value;
            const soLuong = parseInt(document.getElementById('soLuong').value);
            
            const { data, error } = await supabase.from('orders').insert([
                { customer_name: tenKhach, product: sanPham, quantity: soLuong }
            ]);
            if (error) {
                alert('Lỗi khi thêm đơn hàng: ' + error.message);
            } else {
                alert('Thêm đơn hàng thành công!');
            }
        }

        async function layDanhSachNhanVien() {
            const { data, error } = await supabase.from('employees').select('*');
            if (error) {
                alert('Lỗi khi lấy danh sách nhân viên: ' + error.message);
            } else {
                const danhSach = document.getElementById('danhSachNhanVien');
                danhSach.innerHTML = '';
                data.forEach(nv => {
                    let li = document.createElement('li');
                    li.textContent = nv.name + ' - ' + nv.position;
                    danhSach.appendChild(li);
                });
            }
        }

        async function capNhatKho() {
            const productId = parseInt(document.getElementById('productId').value);
            const newQuantity = parseInt(document.getElementById('newQuantity').value);
            
            const { data, error } = await supabase.from('inventory').update({ quantity: newQuantity }).eq('id', productId);
            if (error) {
                alert('Lỗi khi cập nhật kho: ' + error.message);
            } else {
                alert('Cập nhật kho thành công!');
            }
        }
    </script>
</body>
</html>
